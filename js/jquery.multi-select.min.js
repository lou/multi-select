(function(b){var a={init:function(c){this.settings={disabledClass:"disabled"};if(c){this.settings=b.extend(this.settings,c)}var d=this;d.hide();d.each(function(){var g=b(this);g.attr("id",g.attr("id")?g.attr("id"):"ms-"+Math.ceil(Math.random()*1000));var f=b('<div id="ms-'+g.attr("id")+'" class="ms-container"></div>'),h=b('<div class="ms-selectable"></div>'),j=b('<div class="ms-selection"></div>'),e=b("<ul></ul>"),i=b("<ul></ul>");if(g.children("option[value='']").length==0){g.prepend("<option value=''></option>")
}g.data("settings",d.settings);g.children("option:not(option[value=''])").each(function(){var k=b('<li ms-value="'+b(this).val()+'">'+b(this).text()+"</li>");if(b(this).attr("title")){k.attr("title",b(this).attr("title"))}if(b(this).attr("disabled")||g.attr("disabled")){k.attr("disabled","disabled");k.addClass(d.settings.disabledClass)}k.click(function(){g.multiSelect("select",b(this).attr("ms-value"))});e.append(k)});if(d.settings.selectableHeader){h.append(d.settings.selectableHeader)}h.append(e);
if(d.settings.selectedHeader){j.append(d.settings.selectedHeader)}j.append(i);f.append(h);f.append(j);g.after(f);g.children("option:selected").each(function(){g.multiSelect("select",b(this).val(),"init")})})},select:function(j,c){var d=this,m=((d.val()&&d.val()[0]!="")?d.val():[]),k=b.inArray(j,m),l=d.find('option[value="'+j+'"]').text(),h=d.find('option[value="'+j+'"]').attr("title");if(k==-1||c=="init"){var e=b('<li ms-value="'+j+'">'+l+"</li>").detach(),n=b.merge(m,[j]),f=b("#ms-"+d.attr("id")+" .ms-selectable ul"),i=b("#ms-"+d.attr("id")+" .ms-selection ul"),g=f.children('li[ms-value="'+j+'"]');
if(!g.attr("disabled")){g.hide();d.val(n);if(h){e.attr("title",h)}e.click(function(){d.multiSelect("deselect",b(this).attr("ms-value"))});i.append(e);i.trigger("change");f.trigger("change");if(typeof d.data("settings").afterSelect=="function"&&c!="init"){d.data("settings").afterSelect.call(this,j,l)}}}},deselect:function(h){var d=this,j=(d.val()?d.val():[]),f=false,k=b.map(j,function(l){if(l!=h){return l}else{f=true}});if(f){var e=b("#ms-"+d.attr("id")+" .ms-selectable ul"),i=b("#ms-"+d.attr("id")+" .ms-selection ul"),g=e.children('li[ms-value="'+h+'"]'),c=i.children('li[ms-value="'+h+'"]');
if(k.length==0){k=[""]}d.val(k);g.show();c.remove();i.trigger("change");e.trigger("change");if(typeof d.data("settings").afterDeselect=="function"){d.data("settings").afterDeselect.call(this,h,c.text())}}},select_all:function(){var c=this;c.children("option:not(option[value=''])").each(function(){c.multiSelect("select",b(this).val(),"select_all")})},deselect_all:function(){var c=this;c.children("option:not(option[value=''])").each(function(){c.multiSelect("deselect",b(this).val(),"deselect_all")})
}};b.fn.multiSelect=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{if(console.log){console.log("Method "+c+" does not exist on jquery.multiSelect")}}}return false}})(jQuery);